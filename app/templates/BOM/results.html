{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% import "_macros.html" as macros %}

{% block title %}

    {{ super() }}

    Page Title

{% endblock %}

{% block page_content %}

    <div class="ui raised equal width grid segment">
        <div class=" column">
            <p>
                <strong>Comment: </strong> {{ result.comment }} <br>
                <strong>File Used: </strong> {{ result.file.name }} <br>
                <strong>Create Date: </strong> {{ result.timestamp }} <br>
                <strong>Result Reference: </strong> {{ result.id }}
            </p>
        </div>
        <div class="column">
                <a class="ui primary button" href="{{ url_for('BOM.BOM_setup') }}"><i class="power off icon"></i> Rerun BOM Tool</a></li>
        </div>
    </div>
        <h1 class="header">Required Materials</h1>

    <div class="ui raised segment">
        {% for material in result.material_review() %}
            <div>
                <strong class="header">
                    {{ material }}
                    {% if result.material_missing(material) %}
                        <span class="ui red label">Parts Missing</span>
                    {% endif %}
                </strong><br>
                Average: {{ result.material_average_percentage(material) }}%,
                High: {{ result.material_high_percentage(material) }}%,
                Low: {{ result.material_low_percentage(material) }}%


                <ul>
                    {% for length in result.required_lengths(material) %}
                        <li>{{ length }} &mdash; {{ result.required_length_qty(material, length) }} Qty</li>
                    {% endfor %}
                </ul>
            </div>
        {% endfor %}
    </div>




{% if result.has_missing_parts() %}
  <h1 class="header">Missing Parts</h1>

<div class="ui raised segment">
        {% for material in result.material_review() %}
            {% if result.is_missing_parts_for_material(material) %}
            <div class="ui vertical segment">
            <h3 class="header">Parts missing in {{ material }}</h3>
            <div class="ui equal width grid">
            <br>
        {% for part in result.get_missing_parts_for_material(material) %}

                {% include("BOM/_part_result.html") %}
            {% endfor %}
            </div>
            </div>
            {% endif %}
        {% endfor %}
</div>

    {% endif %}

<h1 class="header">Used Beams</h1>

    <div class="ui raised stackable gird segment">
        {% for material in result.material_review() %}

            {% include("BOM/_beam.html") %}

        {% endfor %}

    </div>


{% endblock %}

{% block scripts %}
    {{ super() }}
{% endblock %}
